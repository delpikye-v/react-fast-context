"use strict";var t=require("react");function e(t,e){var n;let r=t;const c=new Set,o=null!==(n=null==e?void 0:e.merge)&&void 0!==n?n:"shallow";let s=!1,u=!1;function i(){s?u=!0:c.forEach(t=>t())}return{get:function(){return r},set:function(t){const e=r,n=structuredClone(e);t(n),r=function(t,e){if("none"===o)return e;const n=structuredClone(e);for(const e in n){const r=t[e],c=n[e];r&&c&&"object"==typeof r&&"object"==typeof c&&!Array.isArray(r)&&!Array.isArray(c)&&"shallow"===o&&(n[e]={...r,...c})}return n}(e,n),i()},replace:function(t){r=t,i()},batch:function(t){s=!0,t(),s=!1,u&&(u=!1,i())},transaction:function(t){const e=r,n=s,c=u;s=!0,u=!1;try{t(),s=n,!n&&u&&(u=!1,i())}catch(t){throw r=e,s=n,u=c,t}},subscribe:function(t){return c.add(t),()=>c.delete(t)}}}function n(t,e){const n={};for(const r in t){const c=t[r];n[r]=(...t)=>{e(e=>{c(e,...t)})}}return n}function r(e,n){return function(r,c=Object.is){const o=t.useRef(),s=t.useRef(!1),u=()=>{const t=r(e());return s.current&&c(o.current,t)?o.current:(s.current=!0,o.current=t,t)};return t.useSyncExternalStore(n,u,u)}}exports.bindActions=n,exports.bindFastContext=function(t){return function(e,n,r){var c;const o=null!==(c=r.signal)&&void 0!==c?c:(new AbortController).signal;return{payload:e,scope:n,emit:r.emit,signal:o,state:t.get(),setState(e){t.set(e)}}}},exports.createFastContext=function t(c){var o;const s=e(c.state,{merge:null!==(o=c.merge)&&void 0!==o?o:"shallow"}),u=r(s.get,s.subscribe);function i(t,e){let n=t(s.get());return{use:()=>u(t,e),value:()=>t(s.get()),subscribe:function(r){return s.subscribe(()=>{const c=t(s.get());(e?e(n,c):Object.is(n,c))||(n=c,r(c))})}}}const a=c.actions?n(c.actions,s.set):void 0;return{state:s.get,get:s.get,set:s.set,replace:s.replace,batch:s.batch,transaction:s.transaction,subscribe:s.subscribe,update:function(t){s.set(t)},commit:function(t){s.transaction(()=>{s.set(t)})},use:u,computed:i,select:i,peek:function(t){const e=s.get();return t?t(e):e},when:function(t,e){let n=!1;return s.subscribe(()=>{if(n)return;const r=s.get(),c=t(r);c&&(n=!0,e(c,r))})},watch:function(t,e,n){let r=t(s.get());return s.subscribe(()=>{const c=t(s.get());(n?n(r,c):Object.is(r,c))||(e(c,r),r=c)})},scope:function(e,n){return t({state:e,actions:c.actions,merge:null==n?void 0:n.merge})},devtools:function(t){return s.subscribe(()=>t({state:s.get()}))},actions:a}},exports.createFastSelector=r,exports.createStore=e;
