"use strict";var t=require("react");function e(t){let e=t;const n=new Set;let r=!1,c=!1;function s(){r?c=!0:n.forEach(t=>t())}return{get:function(){return e},set:function(t){const n=structuredClone(e);t(n),e=n,s()},replace:function(t){e=t,s()},batch:function(t){r=!0,t(),r=!1,c&&(c=!1,s())},transaction:function(t){const n=e,o=r,u=c;r=!0,c=!1;try{t(),r=o,!o&&c&&(c=!1,s())}catch(t){throw e=n,r=o,c=u,t}},subscribe:function(t){return n.add(t),()=>n.delete(t)}}}function n(t,e){const n={};for(const r in t){const c=t[r];n[r]=(...t)=>{e(e=>{c(e,...t)})}}return n}function r(e,n){return function(r,c=Object.is){const s=t.useRef(),o=t.useRef(!1),u=()=>{const t=r(e());return o.current&&c(s.current,t)?s.current:(o.current=!0,s.current=t,t)};return t.useSyncExternalStore(n,u,u)}}exports.bindActions=n,exports.bindFastContext=function(t){return function(e,n,r){var c;const s=null!==(c=r.signal)&&void 0!==c?c:(new AbortController).signal;return{payload:e,scope:n,emit:r.emit,signal:s,state:t.get(),setState(e){t.set(e)}}}},exports.createFastContext=function t(c){const s=e(c.state),o=r(s.get,s.subscribe),u=c.actions?n(c.actions,s.set):void 0;return{state:s.get,set:s.set,replace:s.replace,batch:s.batch,transaction:s.transaction,use:o,computed:function(t,e){return{use:()=>o(t,e),value:()=>t(s.get())}},scope:function(e){return t({state:e,actions:c.actions})},subscribe:s.subscribe,devtools:function(t){return s.subscribe(()=>t({state:s.get()}))},actions:u}},exports.createFastSelector=r,exports.createStore=e;
